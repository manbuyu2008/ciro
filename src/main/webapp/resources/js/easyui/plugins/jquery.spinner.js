(function(b){function d(f){var g=b('<span class="spinner"><span class="spinner-arrow"><span class="spinner-arrow-up"></span><span class="spinner-arrow-down"></span></span></span>').insertAfter(f);b(f).addClass("spinner-text").prependTo(g);return g}function c(i,g){var h=b.data(i,"spinner").options;var j=b.data(i,"spinner").spinner;if(g){h.width=g}var f=b('<div style="display:none"></div>').insertBefore(j);j.appendTo("body");if(isNaN(h.width)){h.width=b(i).outerWidth()}j._outerWidth(h.width);b(i)._outerWidth(j.width()-j.find(".spinner-arrow").outerWidth());j.insertAfter(f);f.remove()}function e(g){var f=b.data(g,"spinner").options;var h=b.data(g,"spinner").spinner;h.find(".spinner-arrow-up,.spinner-arrow-down").unbind(".spinner");if(!f.disabled){h.find(".spinner-arrow-up").bind("mouseenter.spinner",function(){b(this).addClass("spinner-arrow-hover")}).bind("mouseleave.spinner",function(){b(this).removeClass("spinner-arrow-hover")}).bind("click.spinner",function(){f.spin.call(g,false);f.onSpinUp.call(g);b(g).validatebox("validate")});h.find(".spinner-arrow-down").bind("mouseenter.spinner",function(){b(this).addClass("spinner-arrow-hover")}).bind("mouseleave.spinner",function(){b(this).removeClass("spinner-arrow-hover")}).bind("click.spinner",function(){f.spin.call(g,true);f.onSpinDown.call(g);b(g).validatebox("validate")})}}function a(h,f){var g=b.data(h,"spinner").options;if(f){g.disabled=true;b(h).prop("disabled",true)}else{g.disabled=false;b(h).prop("disabled",false)}}b.fn.spinner=function(f,g){if(typeof f=="string"){var h=b.fn.spinner.methods[f];if(h){return h(this,g)}else{return this.validatebox(f,g)}}f=f||{};return this.each(function(){var i=b.data(this,"spinner");if(i){b.extend(i.options,f)}else{i=b.data(this,"spinner",{options:b.extend({},b.fn.spinner.defaults,b.fn.spinner.parseOptions(this),f),spinner:d(this)});b(this).prop("disabled",false)}b(this).val(i.options.value);b(this).attr("readonly",!i.options.editable);a(this,i.options.disabled);c(this);b(this).validatebox(i.options);e(this)})};b.fn.spinner.methods={options:function(g){var f=b.data(g[0],"spinner").options;return b.extend(f,{value:g.val()})},destroy:function(f){return f.each(function(){var g=b.data(this,"spinner").spinner;b(this).validatebox("destroy");g.remove()})},resize:function(g,f){return g.each(function(){c(this,f)})},enable:function(f){return f.each(function(){a(this,false);e(this)})},disable:function(f){return f.each(function(){a(this,true);e(this)})},getValue:function(f){return f.val()},setValue:function(g,f){return g.each(function(){var h=b.data(this,"spinner").options;h.value=f;b(this).val(f)})},clear:function(f){return f.each(function(){var g=b.data(this,"spinner").options;g.value="";b(this).val("")})}};b.fn.spinner.parseOptions=function(g){var f=b(g);return b.extend({},b.fn.validatebox.parseOptions(g),b.parser.parseOptions(g,["width","min","max",{increment:"number",editable:"boolean"}]),{value:(f.val()||undefined),disabled:(f.prop("disabled")?true:undefined)})};b.fn.spinner.defaults=b.extend({},b.fn.validatebox.defaults,{width:"auto",value:"",min:null,max:null,increment:1,editable:true,disabled:false,spin:function(f){},onSpinUp:function(){},onSpinDown:function(){}})})(jQuery);