(function($){function i(u){u.each(function(){$(this).remove();if($.browser.msie){this.outerHTML=""}})}function o(C,A,w){if(!w){w=$.data(C,"panel")}var u=w.options;var v=w.panel;var z=w.dc.header;var E=w.dc.body;if(A){if(A.width){u.width=A.width}if(A.height){u.height=A.height}if(A.left!=null){u.left=A.left}if(A.top!=null){u.top=A.top}}if(u.fit==true){var x=v.parent();x.addClass("panel-noscroll");if(x[0].tagName=="BODY"){$("html").addClass("panel-fit")}u.width=x.width();u.height=x.height()-getCssIntValue(x,"padding-bottom")-getCssIntValue(x,"padding-top")}v.css({left:u.left,top:u.top,right:"",bottom:""});var y=$(C),G=y.parent();if(!isNaN(u.width)){v._outerWidth(u.width)}else{v.width("auto")}z.add(E)._outerWidth(v.width());var D=u.height-getCssIntValue(y,"margin-top")-getCssIntValue(y,"margin-bottom");if(!isNaN(u.height)){v._outerHeight(D);var B=z.outerHeight();if(!B){B=0}var F=v.height()-B;if(u.boundOffset){F-=u.boundOffset}E._outerHeight(F)}else{E.height("auto")}v.css("height","");u.onResize.apply(C,[u.width,D]);E.find("div").triggerHandler("_resize")}function n(x,y,w){if(!w){w=$.data(x,"panel")}var v=w.options;var u=w.panel;if(y){if(y.left!=null){v.left=y.left}if(y.top!=null){v.top=y.top}}u.css({left:v.left,top:v.top});v.onMove.apply(x,[v.left,v.top])}function r(w){var u=$(w);if(!u.attr("id")){u.attr("id",$.parser.getObjGUID())}u.addClass("panel-body");var v=$('<div class="panel" targetid="'+u.attr("id")+'"></div>').insertBefore(w);v[0].appendChild(w);v.bind("_resize",{target:w},function(A){var z=A.data.target;var y=$.data(z,"panel");var x=y.options;if(x.fit==true){o(z,undefined,y)}return false});return v}function f(B,w){if(!w){w=$.data(B,"panel")}var u=w.options;var v=w.panel;if(u.tools&&typeof u.tools=="string"){v.find(">div.panel-header>div.panel-tool .panel-tool-a").appendTo(u.tools)}i(v.children("div.panel-header"));if(u.title&&!u.noheader){var y=w.dc.header=$('<div class="panel-header"><div class="panel-title">'+u.title+"</div></div>").prependTo(v);if(u.iconCls){y.find(".panel-title").addClass("panel-with-icon");$('<div class="panel-icon"></div>').addClass(u.iconCls).appendTo(y)}var z=$('<div class="panel-tool"></div>').appendTo(y);z.bind("click",function(D){D.stopPropagation()});if(u.tools){if(typeof u.tools=="string"){$(u.tools).children().each(function(D){var E=$(this);E.addClass(E.attr("iconCls")).addClass("panel-tool-a").appendTo(D)},[z])}else{for(var x=0,A=u.tools.length;x<A;x++){var C=$('<a href="javascript:void(0)"></a>').addClass(u.tools[x].iconCls).appendTo(z);if(u.tools[x].handler){C.bind("click",eval(u.tools[x].handler))}}}}if(u.collapsible){$('<a class="panel-tool-collapse" href="javascript:void(0)"></a>').appendTo(z).bind("click",{target:B},function(G){var F=G.data.target;var E=$.data(F,"panel");var D=E.options;if(D.collapsed==true){j(F,true,E)}else{l(F,true,E)}return false})}if(u.minimizable){$('<a class="panel-tool-min" href="javascript:void(0)"></a>').appendTo(z).bind("click",{target:B},function(D){s(D.data.target);return false})}if(u.maximizable){$('<a class="panel-tool-max" href="javascript:void(0)"></a>').appendTo(z).bind("click",{target:B},function(G){var F=G.data.target;var E=$.data(F,"panel");var D=E.options;if(D.maximized==true){b(F,E)}else{t(F,E)}return false})}if(u.closable){$('<a class="panel-tool-close" href="javascript:void(0)"></a>').appendTo(z).bind("click",{target:B},function(D){a(D.data.target);return false})}w.dc.body.removeClass("panel-body-noheader")}else{w.dc.body.addClass("panel-body-noheader");w.dc.header=$()}}function c(w,v){if(!v){v=$.data(w,"panel")}if(v.options.href&&(!v.isLoaded||!v.options.cache)){v.isLoaded=false;h(w);var u=v.dc.body;if(v.options.loadingMessage){u.html('<div class="panel-loading">'+v.options.loadingMessage+"</div>")}var x=$(w).attr("id");$.ajax({url:v.options.href,cache:false,success:function(B){var y=$("#"+x);var C=y[0];var A=$.data(C,"panel");var z=A.dc.body;z.html(A.options.extractor.call(C,B));if($.parser){$.parser.parse(z)}A.options.onLoad.apply(C,arguments);A.isLoaded=true}})}}function h(v){var u=$(v);u.find(".combo-f").each(function(){$(this).combo("destroy")});u.find(".m-btn").each(function(){$(this).menubutton("destroy")});u.find(".s-btn").each(function(){$(this).splitbutton("destroy")})}function e(u){$(u).find("div.panel:visible,div.accordion:visible,div.tabs-container:visible,div.layout:visible").each(function(){$(this).triggerHandler("_resize",[true])})}function d(y,v,x){if(!x){x=$.data(y,"panel")}var w=x.options;var u=x.panel;if(v!=true){if(w.onBeforeOpen.call(y)==false){return}}u.show();if(w.maxWhenExceed&&(w.top<0||w.left<0)){w.maximized=true}w.closed=false;w.minimized=false;w.onOpen.call(y);if(w.maximized==true){w.maximized=false;t(y,x)}if(w.collapsed==true){w.collapsed=false;l(y,false,x)}if(!w.collapsed){c(y,x);e(y)}}function a(y,x,w){if(!w){w=$.data(y,"panel")}var v=w.options;var u=w.panel;if(!u.is(":visible")){return}if(x!=true){if(v.onBeforeClose.call(y)==false){return}}u.hide();v.closed=true;v.onClose.call(y)}function p(y,x,w){if(!w){w=$.data(y,"panel")}var v=w.options;var u=w.panel;if(x!=true){if(v.onBeforeDestroy.call(y)==false){return}}h(y);i(u);v.onDestroy.call(y)}function l(A,w,z){if(!z){z=$.data(A,"panel")}var y=z.options;var v=z.panel;var u=z.dc.body;var x=z.dc.header.find("a.panel-tool-collapse");if(y.collapsed==true){return}u.stop(true,true);if(y.onBeforeCollapse.call(A)==false){return}x.addClass("panel-tool-expand");if(w==true){var B=$(A).attr("id");u.slideUp("normal",function(){var D=$("#"+B)[0];var C=$.data(D,"panel").options;C.collapsed=true;C.onCollapse.call(D)})}else{u.hide();y.collapsed=true;y.onCollapse.call(A)}}function j(A,w,z){if(!z){z=$.data(A,"panel")}var y=z.options;var v=z.panel;var u=z.dc.body;var x=z.dc.header.find("a.panel-tool-collapse");if(y.collapsed==false){return}u.stop(true,true);if(y.onBeforeExpand.call(A)==false){return}x.removeClass("panel-tool-expand");if(w==true){var B=$(A).attr("id");u.slideDown("normal",function(){var E=$("#"+B)[0];var D=$.data(E,"panel");var C=D.options;C.collapsed=false;C.onExpand.call(E);c(E,D);e(E)})}else{u.show();y.collapsed=false;y.onExpand.call(A);c(A,z);e(A)}}function t(y,x){if(!x){x=$.data(y,"panel")}var w=x.options;var u=x.panel;var v=x.dc.header.find("a.panel-tool-max");if(w.maximized==true){return}v.addClass("panel-tool-restore");if(w.top<0||w.left<0){v.hide()}if(!x.original){x.original={width:w.width,height:w.height,left:w.left,top:w.top,fit:w.fit}}w.left=0;w.top=0;w.fit=true;o(y,undefined,x);w.minimized=false;w.maximized=true;w.onMaximize.call(y)}function s(x,w){if(!w){w=$.data(x,"panel")}var v=w.options;var u=w.panel;u.hide();v.minimized=true;v.maximized=false;v.onMinimize.call(x)}function b(z,y){if(!y){y=$.data(z,"panel")}var x=y.options;var u=y.panel;var v=y.dc.header.find("a.panel-tool-max");if(x.maximized==false){return}u.show();v.removeClass("panel-tool-restore");var w=y.original;x.width=w.width;x.height=w.height;x.left=w.left;x.top=w.top;x.fit=w.fit;o(z,undefined,y);x.minimized=false;x.maximized=false;y.original=null;x.onRestore.call(z)}function k(y,x){if(!x){x=$.data(y,"panel")}var w=x.options;var v=x.panel;var z=x.dc.header;var u=x.dc.body;v.css(w.style);v.addClass(w.cls);if(w.border){z.removeClass("panel-header-noborder");u.removeClass("panel-body-noborder")}else{z.addClass("panel-header-noborder");u.addClass("panel-body-noborder")}z.addClass(w.headerCls);u.addClass(w.bodyCls)}function g(v,w){var u=$.data(v,"panel");u.options.title=w;u.dc.header.find("div.panel-title").html(w)}var q=false;var m=true;$(window).unbind(".panel").bind("resize.panel",function(){if(!m){return}if(q!==false){clearTimeout(q)}q=setTimeout(function(){m=false;var u=$("body.layout");if(u.length){$("body div.window-body:visible").panel("resize");u.layout("resize")}else{$("body").children("div.panel,div.accordion,div.tabs-container,div.layout").triggerHandler("_resize")}m=true;q=false},200)});$.fn.panel=function(u,v){if(typeof u=="string"){return $.fn.panel.methods[u](this,v)}u=u||{};return this.each(function(w){var y=$.data(this,"panel");var x;if(y){x=$.extend(y.options,w)}else{x=$.extend({},$.fn.panel.defaults,$.fn.panel.parseOptions(this),w);$(this).attr("title","");y=$.data(this,"panel",{options:x,panel:r(this),isLoaded:false});y.dc={body:y.panel.children("div.panel-body")}}if(x.content){$(this).html(x.content);if($.parser){$.parser.parse(this)}}f(this,y);k(this,y);if(x.doSize==true){y.panel.css("display","block");o(this,undefined,y)}if(x.closed==true||x.minimized==true){y.panel.hide()}else{d(this,undefined,y)}},[u])};$.fn.panel.methods={options:function(u){return $.data(u[0],"panel").options},panel:function(u){return $.data(u[0],"panel").panel},header:function(u){return $.data(u[0],"panel").dc.header},body:function(u){return $.data(u[0],"panel").dc.body},setTitle:function(v,u){return v.each(function(){g(this,u)})},open:function(v,u){return v.each(function(){d(this,u)})},close:function(v,u){return v.each(function(){a(this,u)})},destroy:function(v,u){return v.each(function(){p(this,u)})},refresh:function(v,u){return v.each(function(){var w=$.data(this,"panel");w.isLoaded=false;if(u){w.options.href=u}c(this,w)})},resize:function(v,u){return v.each(function(){o(this,u)})},move:function(v,u){return v.each(function(){n(this,u)})},maximize:function(u){return u.each(function(){t(this)})},minimize:function(u){return u.each(function(){s(this)})},restore:function(u){return u.each(function(){b(this)})},collapse:function(v,u){return v.each(function(){l(this,u)})},expand:function(v,u){return v.each(function(){j(this,u)})}};$.fn.panel.parseOptions=function(v){var u=$(v);return $.extend({},$.parser.parseOptions(v,["id","width","height","left","top","title","iconCls","cls","headerCls","bodyCls","tools","href",{cache:"boolean",fit:"boolean",border:"boolean",noheader:"boolean"},{collapsible:"boolean",minimizable:"boolean",maximizable:"boolean"},{closable:"boolean",collapsed:"boolean",minimized:"boolean",maximized:"boolean",closed:"boolean"}]),{loadingMessage:u.attr("loadingMessage")})};$.fn.panel.defaults={id:null,title:null,iconCls:null,width:"auto",height:"auto",left:null,top:null,cls:null,headerCls:null,bodyCls:null,style:{},href:null,cache:true,fit:false,border:true,doSize:true,noheader:false,content:null,maxWhenExceed:false,collapsible:false,minimizable:false,maximizable:false,closable:false,collapsed:false,minimized:false,maximized:false,closed:false,tools:null,loadingMessage:"Loading...",extractor:function(w){var v=/<body[^>]*>((.|[\n\r])*)<\/body>/im;var u=v.exec(w);if(u){return u[1]}else{return w}},onLoad:function(){},onBeforeOpen:function(){},onOpen:function(){},onBeforeClose:function(){},onClose:function(){},onBeforeDestroy:function(){},onDestroy:function(){},onResize:function(v,u){},onMove:function(v,u){},onMaximize:function(){},onRestore:function(){},onMinimize:function(){},onBeforeCollapse:function(){},onBeforeExpand:function(){},onCollapse:function(){},onExpand:function(){}}})(jQuery);