(function(e){function d(k,o){o=o||{};if(o.onSubmit){if(o.onSubmit.call(k)==false){return}}var g=e(k);if(o.url){g.attr("action",o.url)}var l="easyui_frame_"+(new Date().getTime());var h=e("<iframe id="+l+" name="+l+"></iframe>").attr("src",window.ActiveXObject?"javascript:false":"about:blank").css({position:"absolute",top:-1000,left:-1000});var n=g.attr("target"),m=g.attr("action");g.attr("target",l);try{h.appendTo("body");h.bind("load",i);g[0].submit()}finally{g.attr("action",m);n?g.attr("target",n):g.removeAttr("target")}var j=10;function i(){h.unbind();var p=e("#"+l).contents().find("body");var r=p.html();if(r==""){if(--j){setTimeout(i,100);return}return}var q=p.find(">textarea");if(q.length){r=q.val()}else{var s=p.find(">pre");if(s.length){r=s.html()}}if(o.success){o.success(r)}setTimeout(function(){h.unbind();h.remove()},100)}}function c(m,k){var j=e.data(m,"form");if(!j){j=e.data(m,"form",{options:e.extend({},e.fn.form.defaults)})}var i=j.options;if(typeof k=="string"){var n={};if(i.onBeforeLoad.call(m,n)==false){return}e.ajax({url:k,data:n,dataType:"json",success:function(o){h(o)},error:function(){i.onLoadError.apply(m,arguments)}})}else{h(k)}function h(s){var q=e(m);for(var p in s){var t=s[p];var o=g(p,t);if(!o.length){var r=q.find('input[numberboxName="'+p+'"]');if(r.length){r.numberbox("setValue",t)}else{e('input[name="'+p+'"]',q).val(t);e('textarea[name="'+p+'"]',q).val(t);e('select[name="'+p+'"]',q).val(t)}}l(p,t)}i.onLoadSuccess.call(m,s);f(m)}function g(p,r){var q=e(m);var o=e('input[name="'+p+'"][type=radio], input[name="'+p+'"][type=checkbox]',q);e.fn.prop?o.prop("checked",false):o.attr("checked",false);o.each(function(){var s=e(this);if(s.val()==String(r)){e.fn.prop?s.prop("checked",true):s.attr("checked",true)}});return o}function l(o,s){var r=e(m);var u=["combobox","combotree","combogrid","datetimebox","datebox","combo"];var t=r.find('[comboName="'+o+'"]');if(t.length){for(var p=0;p<u.length;p++){var q=u[p];if(t.hasClass(q+"-f")){if(t[q]("options").multiple){t[q]("setValues",s)}else{t[q]("setValue",s)}return}}}}}function b(g){e("input,select,textarea",g).each(function(){var j=this.type,h=this.tagName.toLowerCase();if(j=="text"||j=="hidden"||j=="password"||h=="textarea"){this.value=""}else{if(j=="file"){var i=e(this);i.after(i.clone().val(""));i.remove()}else{if(j=="checkbox"||j=="radio"){this.checked=false}else{if(h=="select"){this.selectedIndex=-1}}}}});if(e.fn.combo){e(".combo-f",g).combo("clear")}if(e.fn.combobox){e(".combobox-f",g).combobox("clear")}if(e.fn.combotree){e(".combotree-f",g).combotree("clear")}if(e.fn.combogrid){e(".combogrid-f",g).combogrid("clear")}f(g)}function a(i){var h=e(i),g=h.attr("id");if(!g){g=e.parser.getObjGUID();h.attr("id",g)}h.unbind(".form").bind("submit.form",function(){setTimeout(function(){var j=e("#targetId")[0];d(j,e.data(j,"form").options)},0);return false})}function f(h){if(e.fn.validatebox){e(".validatebox-invalid",h).removeClass("validatebox-invalid");var g=e(".validatebox-text:enabled:visible",h);if(g.length){g.validatebox("validate");g.trigger("focus");g.trigger("blur");var i=e(".validatebox-invalid:first",h).focus();return i.length==0}}return true}e.fn.form=function(g,h){if(typeof g=="string"){return e.fn.form.methods[g](this,h)}g=g||{};return this.each(function(){var i=e.data(this,"form");if(!i){i=e.data(this,"form",{options:e.extend({},e.fn.form.defaults,g)})}a(this,i)})};e.fn.form.methods={submit:function(h,g){return h.each(function(){d(this,e.extend({},e.fn.form.defaults,g||{}))})},load:function(h,g){return h.each(function(){c(this,g)})},clear:function(g){return g.each(function(){b(this)})},validate:function(g){return f(g[0])}};e.fn.form.defaults={url:null,onSubmit:function(){return e(this).form("validate")},success:function(g){},onBeforeLoad:function(g){},onLoadSuccess:function(g){},onLoadError:function(){}}})(jQuery);