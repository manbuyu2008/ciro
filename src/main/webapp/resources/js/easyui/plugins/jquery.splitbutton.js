(function(b){function c(h,g){if(!g){g=b.data(h,"splitbutton")}var f=g.options;var d=b(h);if(!d.attr("id")){d.attr("id",b.parser.getObjGUID())}d.removeClass("s-btn-active s-btn-plain-active").addClass("s-btn");d.linkbutton(b.extend({},f,{text:f.text+'<span class="s-btn-downarrow">&nbsp;</span>'}));if(f.menu){var e=b(f.menu);e.attr("parentbtnid",d.attr("id"));e.menu({onShow:function(){var i=b("#"+b(this).attr("parentbtnid"));var j=b.data(i[0],"menubutton").options;i.addClass((j.plain==true)?"s-btn-plain-active":"s-btn-active")},onHide:function(){var i=b("#"+b(this).attr("parentbtnid"));var j=b.data(i[0],"menubutton").options;i.removeClass((j.plain==true)?"s-btn-plain-active":"s-btn-active")}})}a(h,f.disabled,g)}function a(k,g,j){if(!j){j=b.data(k,"splitbutton")}var h=j.options;h.disabled=g;var e=b(k);var f=e.find(".s-btn-downarrow");if(g){e.linkbutton("disable");f.unbind(".splitbutton")}else{e.linkbutton("enable");f.unbind(".splitbutton");f.bind("click.splitbutton",function(){var l=b(this).parents(".s-btn")[0];d(l);return false});var i=null;f.bind("mouseenter.splitbutton",function(){i=setTimeout(function(){var l=b(this).parents(".s-btn")[0];d(l);l=null},h.duration);return false}).bind("mouseleave.splitbutton",function(){if(i){clearTimeout(i)}})}function d(o){var m=b.data(o,"menubutton").options;if(!m.menu){return}var l=b(o);var n=l.offset().left;if(n+b(m.menu).outerWidth()+5>b(window).width()){n=b(window).width()-b(m.menu).outerWidth()-5}b("body>div.menu-top").menu("hide");b(m.menu).menu("show",{left:n,top:l.offset().top+l.outerHeight()});l.blur()}}b.fn.splitbutton=function(d,e){if(typeof d=="string"){return b.fn.splitbutton.methods[d](this,e)}d=d||{};return this.each(function(f){var g=b.data(this,"splitbutton");if(g){b.extend(g.options,f)}else{b.data(this,"splitbutton",{options:b.extend({},b.fn.splitbutton.defaults,b.fn.splitbutton.parseOptions(this),f)});b(this).prop("disabled",false)}c(this,g)},[d])};b.fn.splitbutton.methods={options:function(d){return b.data(d[0],"splitbutton").options},enable:function(d){return d.each(function(){a(this,false)})},disable:function(d){return d.each(function(){a(this,true)})},destroy:function(d){return d.each(function(){var e=b(this).splitbutton("options");if(e.menu){b(e.menu).menu("destroy")}b(this).remove()})}};b.fn.splitbutton.parseOptions=function(e){var d=b(e);return b.extend({},b.fn.linkbutton.parseOptions(e),b.parser.parseOptions(e,["menu",{plain:"boolean",duration:"number"}]))};b.fn.splitbutton.defaults=b.extend({},b.fn.linkbutton.defaults,{plain:true,menu:undefined,duration:100})})(jQuery);