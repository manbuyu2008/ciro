(function($){function a(n,g){if(!g){g=$.data(n,"pagination")}var f=g.options;var p=g.bb={};var o={first:{iconCls:"pagination-first",handler:function(t){var s=t.data.target;var i=$.data(s,"pagination").options;if(i.pageNumber>1){c(s,1)}}},prev:{iconCls:"pagination-prev",handler:function(t){var s=t.data.target;var i=$.data(s,"pagination").options;if(i.pageNumber>1){c(s,i.pageNumber-1)}}},next:{iconCls:"pagination-next",handler:function(u){var t=u.data.target;var s=$.data(t,"pagination").options;var i=Math.ceil(s.total/s.pageSize);if(s.pageNumber<i){c(t,s.pageNumber+1)}}},last:{iconCls:"pagination-last",handler:function(u){var t=u.data.target;var s=$.data(t,"pagination").options;var i=Math.ceil(s.total/s.pageSize);if(s.pageNumber<i){c(t,i)}}},refresh:{iconCls:"pagination-load",handler:function(t){var s=t.data.target;var i=$.data(s,"pagination").options;if(i.onBeforeRefresh.call(s,i.pageNumber,i.pageSize)!=false){c(s,i.pageNumber);i.onRefresh.call(s,i.pageNumber,i.pageSize)}}}};var j=$(n).addClass("pagination").html('<table cellspacing="0" cellpadding="0" border="0"><tr></tr></table>');var q=j.find("tr");function r(s){var i=$('<a href="javascript:void(0)"></a>').appendTo(q);i.wrap("<td></td>");i.linkbutton({iconCls:o[s].iconCls,plain:true}).unbind(".pagination").bind("click.pagination",{target:n},o[s].handler);return i}if(f.showPageList){var e=$('<select class="pagination-page-list"></select>');e.bind("change",function(){f.pageSize=parseInt($(this).val());f.onChangePageSize.call(n,f.pageSize);f.sizeChange=true;c(n,f.pageNumber);f.sizeChange=false});var l,m;for(l=0,m=f.pageList.length;l<m;l++){$("<option></option>").text(f.pageList[l]).appendTo(e)}$("<td></td>").append(e).appendTo(q);$('<td><div class="pagination-btn-separator"></div></td>').appendTo(q)}p.first=r("first");p.prev=r("prev");$('<td><div class="pagination-btn-separator"></div></td>').appendTo(q);$('<span style="padding-left:6px;"></span>').html(f.beforePageText).appendTo(q).wrap("<td></td>");p.num=$('<input class="pagination-num" type="text" value="1" size="2">').appendTo(q).wrap("<td></td>");if(f.readonly){p.num.attr("readonly",true)}p.num.unbind(".pagination").bind("keydown.pagination",{target:n},function(s){if(s.keyCode==13){var i=parseInt($(this).val())||1;c(s.data.target,i);return false}});p.after=$('<span style="padding-right:6px;"></span>').appendTo(q).wrap("<td></td>");$('<td><div class="pagination-btn-separator"></div></td>').appendTo(q);p.next=r("next");if(f.showLast){p.last=r("last")}else{p.last=$()}if(f.showRefresh){$('<td><div class="pagination-btn-separator"></div></td>').appendTo(q);p.refresh=r("refresh")}if(f.buttons){$('<td><div class="pagination-btn-separator"></div></td>').appendTo(q);for(l=0,m=f.buttons.length;l<m;l++){var h=f.buttons[l];if(h=="-"){$('<td><div class="pagination-btn-separator"></div></td>').appendTo(q)}else{var k=$("<td></td>").appendTo(q);$('<a href="javascript:void(0)"></a>').appendTo(k).linkbutton($.extend(h,{plain:true})).bind("click",eval(h.handler||function(){}))}}}$('<div class="pagination-info"></div>').appendTo(j);$('<div style="clear:both;"></div>').appendTo(j)}function c(h,g){var f=$.data(h,"pagination");var e=f.options;if(e.onBeforeSelectPage&&!e.onBeforeSelectPage(g)){return}d(h,{pageNumber:g},f);e.onSelectPage.call(h,e.pageNumber,e.pageSize)}function d(h,l,g){if(!g){g=$.data(h,"pagination")}var f=g.options;var k=g.bb;$.extend(f,l||{});var j=$(h).find("select.pagination-page-list");if(j.length){j.val(f.pageSize+"");f.pageSize=parseInt(j.val())}var e=Math.ceil(f.total/f.pageSize)||1;if(f.pageNumber<1){f.pageNumber=1}if(f.pageNumber>e){f.pageNumber=e}k.num.val(f.pageNumber);k.after.html(f.afterPageText.replace(/{pages}/,e));var i=f.displayMsg;i=i.replace(/{from}/,f.total==0?0:f.pageSize*(f.pageNumber-1)+1);i=i.replace(/{to}/,Math.min(f.pageSize*(f.pageNumber),f.total));i=i.replace(/{total}/,f.total);$(h).find("div.pagination-info").html(i);k.first.add(k.prev).linkbutton({disabled:(f.pageNumber==1)});k.next.add(k.last).linkbutton({disabled:(f.pageNumber==e)});b(h,f.loading)}function b(g,i){var f=$.data(g,"pagination");var e=f.options;var h=f.bb;e.loading=i;if(e.showRefresh){if(e.loading){h.refresh.linkbutton({iconCls:"pagination-loading"})}else{h.refresh.linkbutton({iconCls:"pagination-load"})}}}$.fn.pagination=function(e,f){if(typeof e=="string"){return $.fn.pagination.methods[e](this,f)}e=e||{};return this.each(function(g){var h;var i=$.data(this,"pagination");if(i){$.extend(i.options,g)}else{h=$.extend({},$.fn.pagination.defaults,$.fn.pagination.parseOptions(this),g);i=$.data(this,"pagination",{options:h})}a(this,i);d(this,undefined,i)},[e])};$.fn.pagination.methods={options:function(e){return $.data(e[0],"pagination").options},loading:function(e){return e.each(function(){b(this,true)})},loaded:function(e){return e.each(function(){b(this,false)})},getPageCount:function(f){var e=$.data(f[0],"pagination").options;return Math.ceil(e.total/e.pageSize)||1},getTotalCount:function(f){var e=$.data(f[0],"pagination").options;return e.total},refresh:function(f,e){return f.each(function(){d(this,e)})},select:function(f,e){return f.each(function(){c(this,e)})}};$.fn.pagination.parseOptions=function(f){var e=$(f);return $.extend({},$.parser.parseOptions(f,[{total:"number",pageSize:"number",pageNumber:"number"},{loading:"boolean",showPageList:"boolean",showRefresh:"boolean"}]),{pageList:(e.attr("pageList")?eval(e.attr("pageList")):undefined)})};$.fn.pagination.defaults={total:1,pageSize:10,pageNumber:1,pageList:[10,20,30,50],loading:false,buttons:null,showPageList:true,showRefresh:true,showLast:true,readonly:false,onSelectPage:function(f,e){},onBeforeRefresh:function(f,e){},onRefresh:function(f,e){},onChangePageSize:function(e){},beforePageText:"",afterPageText:"/{pages}",displayMsg:"Displaying {from} to {to} of {total} items"}})(jQuery);