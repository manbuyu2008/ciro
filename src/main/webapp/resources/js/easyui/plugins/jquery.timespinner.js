(function(e){function d(h){var g=e.data(h,"timespinner").options;e(h).spinner(g);e(h).unbind(".timespinner");e(h).bind("click.timespinner",function(){var k=0;if(this.selectionStart!=null){k=this.selectionStart}else{if(this.createTextRange){var i=h.createTextRange();var j=document.selection.createRange();j.setEndPoint("StartToStart",i);k=j.text.length}}if(k>=0&&k<=2){g.highlight=0}else{if(k>=3&&k<=5){g.highlight=1}else{if(k>=6&&k<=8){g.highlight=2}}}a(h)}).bind("blur.timespinner",function(){f(h)})}function a(j){var i=e.data(j,"timespinner").options;var k=0,g=0;if(i.highlight==0){k=0;g=2}else{if(i.highlight==1){k=3;g=5}else{if(i.highlight==2){k=6;g=8}}}if(j.selectionStart!=null){j.setSelectionRange(k,g)}else{if(j.createTextRange){var h=j.createTextRange();h.collapse();h.moveEnd("character",g);h.moveStart("character",k);h.select()}}e(j).focus()}function c(l,k){var h=e.data(l,"timespinner").options;if(!k){return null}var j=k.split(h.separator);for(var g=0;g<j.length;g++){if(isNaN(j[g])){return null}}while(j.length<3){j.push(0)}return new Date(1900,0,0,j[0],j[1],j[2])}function f(m){var g=e.data(m,"timespinner").options;var o=e(m).val();var k=c(m,o);if(!k){k=c(m,g.value)}if(!k){g.value="";e(m).val("");return}var l=c(m,g.min);var h=c(m,g.max);if(l&&l>k){k=l}if(h&&h<k){k=h}var n=[i(k.getHours()),i(k.getMinutes())];if(g.showSeconds){n.push(i(k.getSeconds()))}var j=n.join(g.separator);g.value=j;e(m).val(j);function i(p){return(p<10?"0":"")+p}}function b(k,m){var h=e.data(k,"timespinner").options;var l=e(k).val();if(l==""){l=[0,0,0].join(h.separator)}var j=l.split(h.separator);for(var g=0;g<j.length;g++){j[g]=parseInt(j[g],10)}if(m==true){j[h.highlight]-=h.increment}else{j[h.highlight]+=h.increment}e(k).val(j.join(h.separator));f(k);a(k)}e.fn.timespinner=function(g,h){if(typeof g=="string"){var i=e.fn.timespinner.methods[g];if(i){return i(this,h)}else{return this.spinner(g,h)}}g=g||{};return this.each(function(){var j=e.data(this,"timespinner");if(j){e.extend(j.options,g)}else{e.data(this,"timespinner",{options:e.extend({},e.fn.timespinner.defaults,e.fn.timespinner.parseOptions(this),g)});d(this)}})};e.fn.timespinner.methods={options:function(h){var g=e.data(h[0],"timespinner").options;return e.extend(g,{value:h.val()})},setValue:function(h,g){return h.each(function(){e(this).val(g);f(this)})},getHours:function(i){var g=e.data(i[0],"timespinner").options;var h=i.val().split(g.separator);return parseInt(h[0],10)},getMinutes:function(i){var g=e.data(i[0],"timespinner").options;var h=i.val().split(g.separator);return parseInt(h[1],10)},getSeconds:function(i){var g=e.data(i[0],"timespinner").options;var h=i.val().split(g.separator);return parseInt(h[2],10)||0}};e.fn.timespinner.parseOptions=function(g){return e.extend({},e.fn.spinner.parseOptions(g),e.parser.parseOptions(g,["separator",{showSeconds:"boolean",highlight:"number"}]))};e.fn.timespinner.defaults=e.extend({},e.fn.spinner.defaults,{separator:":",showSeconds:false,highlight:0,spin:function(g){b(this,g)}})})(jQuery);